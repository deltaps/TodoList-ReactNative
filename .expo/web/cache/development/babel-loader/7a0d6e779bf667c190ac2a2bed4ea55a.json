{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { getTaskList, getTasks } from \"../API/todoAPI\";\nimport { TokenContext, UsernameContext } from \"../Context/Context\";\nexport default function TodoListsScreen() {\n  var _useContext = useContext(UsernameContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      user = _useContext2[0],\n      setUser = _useContext2[1];\n\n  var _useContext3 = useContext(TokenContext),\n      _useContext4 = _slicedToArray(_useContext3, 2),\n      token = _useContext4[0],\n      setToken = _useContext4[1];\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      erreur = _useState2[0],\n      setErreur = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nbTasks = _useState6[0],\n      setNbTasks = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      task = _useState8[0],\n      setTask = _useState8[1];\n\n  useEffect(function () {\n    getTaskList(user, token).then(function (data) {\n      setNbTasks(data.length);\n      setData(data);\n      var dictionnaire = new Map();\n\n      for (var teste in data) {\n        var trueTasks = getTasks(data[teste].id, token);\n        dictionnaire.set(data[teste].id, trueTasks);\n      }\n\n      setTask(dictionnaire);\n    }).catch(function (err) {\n      setErreur(err.message);\n    });\n  }, []);\n  return erreur != null ? React.createElement(View, null, React.createElement(Text, null, \"Bienvenue sans le liste des todos\"), React.createElement(Text, null, erreur)) : React.createElement(View, null, React.createElement(Text, null, \"Bienvenue sans le liste des todos\"), React.createElement(Text, null, \"Vous poss\\xE9dez \", nbTasks, \" tasksLists\"), React.createElement(FlatList, {\n    data: data,\n    renderItem: function renderItem(item) {\n      return React.createElement(View, null, React.createElement(Text, null, \" Titre de la tasksliste: \", item.item.title), React.createElement(Text, null, \" Id de la tasksliste: \", item.item.id, \" \"), React.createElement(Text, null, \"Liste des t\\xE2che de cette tasksliste:\"), React.createElement(FlatList, {\n        data: task,\n        renderItem: function renderItem(teste) {\n          return React.createElement(View, null, React.createElement(Text, null, teste.item.id), React.createElement(Text, null, teste.item.content));\n        }\n      }));\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/sacha/Documents/License-informatique/L3/semestre2/devMobile/TP2/app/Screen/TodoListsScreen.js"],"names":["React","useContext","useEffect","useState","getTaskList","getTasks","TokenContext","UsernameContext","TodoListsScreen","user","setUser","token","setToken","erreur","setErreur","data","setData","nbTasks","setNbTasks","task","setTask","then","length","dictionnaire","Map","teste","trueTasks","id","set","catch","err","message","item","title","content"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;;;;AAEA,SAAQC,WAAR,EAAqBC,QAArB;AACA,SAAQC,YAAR,EAAqBC,eAArB;AAGA,eAAe,SAASC,eAAT,GAA0B;AACrC,oBAAuBP,UAAU,CAACM,eAAD,CAAjC;AAAA;AAAA,MAAOE,IAAP;AAAA,MAAYC,OAAZ;;AACA,qBAAyBT,UAAU,CAACK,YAAD,CAAnC;AAAA;AAAA,MAAOK,KAAP;AAAA,MAAaC,QAAb;;AACA,kBAA2BT,QAAQ,CAAC,IAAD,CAAnC;AAAA;AAAA,MAAOU,MAAP;AAAA,MAAcC,SAAd;;AACA,mBAAuBX,QAAQ,CAAC,IAAD,CAA/B;AAAA;AAAA,MAAOY,IAAP;AAAA,MAAYC,OAAZ;;AACA,mBAA6Bb,QAAQ,CAAC,IAAD,CAArC;AAAA;AAAA,MAAOc,OAAP;AAAA,MAAeC,UAAf;;AACA,mBAAuBf,QAAQ,CAAC,IAAD,CAA/B;AAAA;AAAA,MAAOgB,IAAP;AAAA,MAAYC,OAAZ;;AAEAlB,EAAAA,SAAS,CAAC,YAAM;AACZE,IAAAA,WAAW,CAACK,IAAD,EAAME,KAAN,CAAX,CACKU,IADL,CACU,UAAAN,IAAI,EAAI;AACVG,MAAAA,UAAU,CAACH,IAAI,CAACO,MAAN,CAAV;AACAN,MAAAA,OAAO,CAACD,IAAD,CAAP;AACA,UAAIQ,YAAY,GAAG,IAAIC,GAAJ,EAAnB;;AACA,WAAI,IAAIC,KAAR,IAAiBV,IAAjB,EAAsB;AAClB,YAAIW,SAAS,GAAGrB,QAAQ,CAACU,IAAI,CAACU,KAAD,CAAJ,CAAYE,EAAb,EAAgBhB,KAAhB,CAAxB;AACAY,QAAAA,YAAY,CAACK,GAAb,CAAiBb,IAAI,CAACU,KAAD,CAAJ,CAAYE,EAA7B,EAAgCD,SAAhC;AACH;;AACDN,MAAAA,OAAO,CAACG,YAAD,CAAP;AACH,KAVL,EAWKM,KAXL,CAWW,UAAAC,GAAG,EAAI;AACVhB,MAAAA,SAAS,CAACgB,GAAG,CAACC,OAAL,CAAT;AACH,KAbL;AAcH,GAfQ,EAeP,EAfO,CAAT;AAiBA,SACIlB,MAAM,IAAI,IAAV,GACA,oBAAC,IAAD,QACI,oBAAC,IAAD,4CADJ,EAEI,oBAAC,IAAD,QAAOA,MAAP,CAFJ,CADA,GAMA,oBAAC,IAAD,QACI,oBAAC,IAAD,4CADJ,EAEI,oBAAC,IAAD,6BAAqBI,OAArB,gBAFJ,EAGI,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEF,IAAhB;AAAsB,IAAA,UAAU,EAAE,oBAACiB,IAAD;AAAA,aAC9B,oBAAC,IAAD,QACI,oBAAC,IAAD,qCAAgCA,IAAI,CAACA,IAAL,CAAUC,KAA1C,CADJ,EAEI,oBAAC,IAAD,kCAA6BD,IAAI,CAACA,IAAL,CAAUL,EAAvC,MAFJ,EAGI,oBAAC,IAAD,kDAHJ,EAII,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAER,IAAhB;AAAsB,QAAA,UAAU,EAAE,oBAACM,KAAD;AAAA,iBAC9B,oBAAC,IAAD,QACI,oBAAC,IAAD,QAAOA,KAAK,CAACO,IAAN,CAAWL,EAAlB,CADJ,EAEI,oBAAC,IAAD,QAAOF,KAAK,CAACO,IAAN,CAAWE,OAAlB,CAFJ,CAD8B;AAAA;AAAlC,QAJJ,CAD8B;AAAA;AAAlC,IAHJ,CAPJ;AA4BH","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\r\nimport {View, Text, FlatList} from 'react-native'\r\nimport {getTaskList, getTasks} from \"../API/todoAPI\";\r\nimport {TokenContext,UsernameContext} from \"../Context/Context\";\r\n\r\n\r\nexport default function TodoListsScreen(){\r\n    const [user,setUser] = useContext(UsernameContext)\r\n    const [token,setToken] = useContext(TokenContext)\r\n    const [erreur,setErreur] = useState(null)\r\n    const [data,setData] = useState(null)\r\n    const [nbTasks,setNbTasks] = useState(null)\r\n    const [task,setTask] = useState(null)\r\n\r\n    useEffect(() => {\r\n        getTaskList(user,token)\r\n            .then(data => {\r\n                setNbTasks(data.length)\r\n                setData(data)\r\n                let dictionnaire = new Map()\r\n                for(let teste in data){\r\n                    let trueTasks = getTasks(data[teste].id,token)\r\n                    dictionnaire.set(data[teste].id,trueTasks)\r\n                }\r\n                setTask(dictionnaire)\r\n            })\r\n            .catch(err => {\r\n                setErreur(err.message)\r\n            })\r\n    },[])\r\n\r\n    return (\r\n        erreur != null ? (\r\n        <View>\r\n            <Text>Bienvenue sans le liste des todos</Text>\r\n            <Text>{erreur}</Text>\r\n        </View>\r\n        ) : (\r\n        <View>\r\n            <Text>Bienvenue sans le liste des todos</Text>\r\n            <Text>Vous possÃ©dez {nbTasks} tasksLists</Text>\r\n            <FlatList data={data} renderItem={(item) =>\r\n                <View>\r\n                    <Text> Titre de la tasksliste: {item.item.title}</Text>\r\n                    <Text> Id de la tasksliste: {item.item.id} </Text>\r\n                    <Text>Liste des tÃ¢che de cette tasksliste:</Text>\r\n                    <FlatList data={task} renderItem={(teste) =>\r\n                        <View>\r\n                            <Text>{teste.item.id}</Text>\r\n                            <Text>{teste.item.content}</Text>\r\n                        </View>\r\n                    }>\r\n                    </FlatList>\r\n                </View>}>\r\n            </FlatList>\r\n        </View>\r\n        )\r\n    )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}
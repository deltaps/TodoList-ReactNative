{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { TokenContext, UsernameContext } from \"../Context/Context\";\nimport { deleteUsers, users } from \"../API/todoAPI\";\nexport default function AdminScreen() {\n  var _useContext = useContext(UsernameContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      username = _useContext2[0],\n      setUsername = _useContext2[1];\n\n  var _useContext3 = useContext(TokenContext),\n      _useContext4 = _slicedToArray(_useContext3, 2),\n      token = _useContext4[0],\n      setToken = _useContext4[1];\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      allUsers = _useState2[0],\n      setAllUsers = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nbUsers = _useState4[0],\n      setNbUsers = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      actualUser = _useState6[0],\n      setActualUser = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      erreur = _useState8[0],\n      setErreur = _useState8[1];\n\n  useEffect(function () {\n    users(username, token).then(function (data) {\n      setAllUsers(data);\n      setNbUsers(data.length);\n    }).catch(function (err) {\n      setErreur(err.message);\n    });\n  }, []);\n  return React.createElement(View, null, React.createElement(Text, null, \"Bienvenue dans la section admin, ci-dessous dessous ce trouve tous les utilisateur de l'application\"), React.createElement(Text, null, \"Il y a actuellement \", nbUsers, \" utilisateurs inscrit sur l'application\"), React.createElement(FlatList, {\n    data: allUsers,\n    renderItem: function renderItem(user) {\n      return React.createElement(View, null, React.createElement(Text, null, \"Nom de l'utilisateur : \", user.item.username), React.createElement(Button, {\n        title: \"TodoLists de l'utilisateur\",\n        onPress: function onPress() {\n          setActualUser(user.item.id);\n        }\n      }), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return deleteUsers(user.item.id, token);\n        }\n      }, React.createElement(Image, {\n        source: require(\"../assets/trash-can-outline.png\"),\n        style: {\n          height: 24,\n          width: 24\n        }\n      })));\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/sacha/Documents/License-informatique/L3/semestre2/devMobile/TP2/app/Screen/AdminScreen.js"],"names":["React","useContext","useEffect","useState","TokenContext","UsernameContext","deleteUsers","users","AdminScreen","username","setUsername","token","setToken","allUsers","setAllUsers","nbUsers","setNbUsers","actualUser","setActualUser","erreur","setErreur","then","data","length","catch","err","message","user","item","id","require","height","width"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;;;;;;;AAEA,SAAQC,YAAR,EAAsBC,eAAtB;AACA,SAAQC,WAAR,EAAqBC,KAArB;AAGA,eAAe,SAASC,WAAT,GAAwB;AACnC,oBAAgCP,UAAU,CAACI,eAAD,CAA1C;AAAA;AAAA,MAAOI,QAAP;AAAA,MAAiBC,WAAjB;;AACA,qBAAyBT,UAAU,CAACG,YAAD,CAAnC;AAAA;AAAA,MAAOO,KAAP;AAAA,MAAaC,QAAb;;AACA,kBAA+BT,QAAQ,CAAC,IAAD,CAAvC;AAAA;AAAA,MAAOU,QAAP;AAAA,MAAgBC,WAAhB;;AACA,mBAA6BX,QAAQ,CAAC,CAAD,CAArC;AAAA;AAAA,MAAOY,OAAP;AAAA,MAAeC,UAAf;;AACA,mBAAmCb,QAAQ,CAAC,IAAD,CAA3C;AAAA;AAAA,MAAOc,UAAP;AAAA,MAAkBC,aAAlB;;AACA,mBAA2Bf,QAAQ,CAAC,IAAD,CAAnC;AAAA;AAAA,MAAOgB,MAAP;AAAA,MAAcC,SAAd;;AAEAlB,EAAAA,SAAS,CAAC,YAAM;AACZK,IAAAA,KAAK,CAACE,QAAD,EAAUE,KAAV,CAAL,CACKU,IADL,CACU,UAAAC,IAAI,EAAI;AACVR,MAAAA,WAAW,CAACQ,IAAD,CAAX;AACAN,MAAAA,UAAU,CAACM,IAAI,CAACC,MAAN,CAAV;AACH,KAJL,EAKKC,KALL,CAKW,UAAAC,GAAG,EAAI;AACVL,MAAAA,SAAS,CAACK,GAAG,CAACC,OAAL,CAAT;AACH,KAPL;AAQH,GATQ,EASP,EATO,CAAT;AAWA,SACI,oBAAC,IAAD,QACI,oBAAC,IAAD,8GADJ,EAEI,oBAAC,IAAD,gCAA2BX,OAA3B,4CAFJ,EAGI,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEF,QAAhB;AAA0B,IAAA,UAAU,EAAE,oBAACc,IAAD;AAAA,aAClC,oBAAC,IAAD,QACI,oBAAC,IAAD,mCAA8BA,IAAI,CAACC,IAAL,CAAUnB,QAAxC,CADJ,EAEI,oBAAC,MAAD;AACI,QAAA,KAAK,EAAC,4BADV;AAEI,QAAA,OAAO,EAAE,mBAAM;AACXS,UAAAA,aAAa,CAACS,IAAI,CAACC,IAAL,CAAUC,EAAX,CAAb;AACP;AAJD,QAFJ,EAQI,oBAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE;AAAA,iBAAMvB,WAAW,CAACqB,IAAI,CAACC,IAAL,CAAUC,EAAX,EAAclB,KAAd,CAAjB;AAAA;AAA3B,SACI,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAEmB,OAAO,mCAAtB;AAA2D,QAAA,KAAK,EAAE;AAAEC,UAAAA,MAAM,EAAE,EAAV;AAAcC,UAAAA,KAAK,EAAE;AAArB;AAAlE,QADJ,CARJ,CADkC;AAAA;AAAtC,IAHJ,CADJ;AAoBH","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\r\nimport {View, Text, Button, TouchableOpacity, Image, FlatList} from 'react-native'\r\nimport {TokenContext, UsernameContext} from \"../Context/Context\";\r\nimport {deleteUsers, users} from \"../API/todoAPI\";\r\n\r\n\r\nexport default function AdminScreen () {\r\n    const [username, setUsername] = useContext(UsernameContext)\r\n    const [token,setToken] = useContext(TokenContext)\r\n    const [allUsers,setAllUsers] = useState(null)\r\n    const [nbUsers,setNbUsers] = useState(0)\r\n    const [actualUser,setActualUser] = useState(null)\r\n    const [erreur,setErreur] = useState(null)\r\n\r\n    useEffect(() => {\r\n        users(username,token)\r\n            .then(data => {\r\n                setAllUsers(data)\r\n                setNbUsers(data.length)\r\n            })\r\n            .catch(err => {\r\n                setErreur(err.message)\r\n            })\r\n    },[])\r\n\r\n    return (\r\n        <View>\r\n            <Text>Bienvenue dans la section admin, ci-dessous dessous ce trouve tous les utilisateur de l'application</Text>\r\n            <Text>Il y a actuellement {nbUsers} utilisateurs inscrit sur l'application</Text>\r\n            <FlatList data={allUsers} renderItem={(user) =>\r\n                <View>\r\n                    <Text>Nom de l'utilisateur : {user.item.username}</Text>\r\n                    <Button\r\n                        title=\"TodoLists de l'utilisateur\"\r\n                        onPress={() => {\r\n                            setActualUser(user.item.id)\r\n                    }}\r\n                        />\r\n                    <TouchableOpacity onPress={() => deleteUsers(user.item.id,token)}>\r\n                        <Image source={require('../assets/trash-can-outline.png')} style={{ height: 24, width: 24 }} />\r\n                    </TouchableOpacity>\r\n                </View>}>\r\n            </FlatList>\r\n        </View>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}